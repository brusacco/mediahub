<% 
  nav_items ||= []
%>

<% if nav_items.any? %>
  <nav class="border-b border-gray-200 shadow-md bg-white" id="topic-nav" data-controller="sticky-nav">
    <div class="max-w-full mx-auto px-4 sm:px-6 lg:px-12 xl:px-16">
      <div class="flex items-center justify-between h-12 overflow-x-auto scrollbar-hide">
        <div class="flex space-x-1 md:space-x-4">
          <% nav_items.each do |item| %>
            <a href="<%= item[:href] %>"
               data-turbo="false"
               class="px-2 md:px-3 py-2 text-xs md:text-sm font-medium text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1"
               aria-label="<%= item[:label] %>">
              <% if item[:icon] %>
                <i class="<%= item[:icon] %> mr-1 md:mr-2" aria-hidden="true"></i>
              <% end %>
              <span class="hidden sm:inline"><%= item[:text] %></span>
              <% if item[:badge] %>
                <span class="ml-1 inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 text-red-700">
                  <%= item[:badge] %>
                </span>
              <% end %>
            </a>
          <% end %>
        </div>
        <!-- Back to Top Button -->
        <a href="#"
           id="backToTop"
           class="ml-4 inline-flex items-center px-3 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-md transition-all cursor-pointer whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1"
           style="opacity: 0; visibility: hidden;"
           aria-label="Volver arriba">
          <svg class="w-4 h-4 mr-1.5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd" />
          </svg>
          Arriba
        </a>
      </div>
    </div>
  </nav>

  <style>
    /* Hide scrollbar for Chrome, Safari and Opera */
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    /* Hide scrollbar for IE, Edge and Firefox */
    .scrollbar-hide {
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;  /* Firefox */
    }
    /* Ensure proper overflow for sticky to work */
    html {
      scroll-behavior: smooth;
      scroll-padding-top: 4rem;
    }
    /* Ensure sticky navigation stays above all content */
    #topic-nav {
      position: sticky;
      position: -webkit-sticky;
      top: 0;
      z-index: 9999;
      background: white;
      width: 100%;
    }
  </style>
<% end %>

