Instalar Ruby 3.3.0 en RVM
https://github.com/rvm/rvm/issues/5404#issuecomment-1806701326

ActiveAdmin CSS issues
https://github.com/activeadmin/activeadmin/issues/3819#issuecomment-351377822



####################################################################################################
# Generar Transcripciones
####################################################################################################
ffmpeg -i https://alba-py-c9n-c9n.stream.mediatiquestream.com/index.m3u8 -f segment -segment_time 60 -reset_timestamps 1 -strftime 1 "c9n/temp/%Y-%m-%dT%H_%M_%S.mp4"
ffmpeg -i https://tigocloudgen.desdeparaguay.net/unicanal/unicanal_baja/playlist.m3u8 -f segment -segment_time 60 -reset_timestamps 1 -strftime 1 "unicanal/temp/%Y-%m-%dT%H_%M_%S.mp4"
whisper *.mp4 --language Spanish --output_format txt


ffmpeg -i https://zn1tf.desdeparaguay.net/npy/npy_py_baja/playlist.m3u8?k=5424a130fd83e690f4e38953fdf32ae7c8abaab438d583c6174c431f48489c88&exp=1722701298 -f segment -segment_time 60 -reset_timestamps 1 -strftime 1 "npy/temp/%Y-%m-%dT%H_%M_%S.mp4"

ffmpeg -i https://zn1tf.desdeparaguay.net/telefuturo/telefuturo_py_baja/playlist.m3u8?k=6c7e0190c9b2127ee96c6c01e2bb41fb47d26639a7c48f1b426e7dcdb67e457d&exp=1722750525  -f segment -segment_time 60 -reset_timestamps 1 -strftime 1 "telefuturo/temp/%Y-%m-%dT%H_%M_%S.mp4"

ffmpeg -i https://zn1gen.desdeparaguay.net/unicanal/unicanal_alta/playlist.m3u8?k=6cb6382937a3b51ad591e0719c991b14c13e95434cb06044f1f7a95ff90c067e&exp=1722750838  -f segment -segment_time 60 -reset_timestamps 1 -strftime 1 "unicanal/temp/%Y-%m-%dT%H_%M_%S.mp4"

ffmpeg -i 'https://abc-color.cdn.vustreams.com/live/d87c2b7b-9ecf-4e6e-b63b-b32772bd7851/live.isml/d87c2b7b-9ecf-4e6e-b63b-b32772bd7851.m3u8' -f segment -segment_time 60 -reset_timestamps 1 -strftime 1 "abc-tv/temp/%Y-%m-%dT%H_%M_%S.mp4"


####################################################################################################
# Generar thumbnail de los videos
####################################################################################################
https://trac.ffmpeg.org/wiki/Create%20a%20thumbnail%20image%20every%20X%20seconds%20of%20the%20video

ffmpeg -i 2024-08-10T20_49_03.mp4 -ss 00:00:14.435 -frames:v 1 out.png
ffmpeg -i 2024-08-10T20_49_03.mp4 -vf "select='eq(pict_type,PICT_TYPE_I)'" -vsync vfr 2024-08-10T20_49_03/thumb%04d.png
ffmpeg -i 2024-08-10T20_49_03.mp4 -vf thumbnail=n=100 2024-08-10T20_49_03/thumb%04d.png



####################################################################################################
# RAKE tasks para el sistema
####################################################################################################
Secuencia para meter videos en la DB
RAILS_ENV=production rake import_videos
RAILS_ENV=production rake generate_transcription

RAILS_ENV=production rake stream:listen
RAILS_ENV=production rake stream:update_stream_urls
nohup RAILS_ENV=production rake stream:listen > output.log 2>&1 &

kill -9 $(ps wuax | grep /opt/google/chrome/chrome | awk {'print $2'})

RESET THE MAIN BRANCH LOCALLY:
https://graphite.dev/guides/git-overwrite-local-remote
git reset --hard origin/main


RUN PUMA ON SERVER
nohup puma  &> output.log &


Running Whisper on CUDA/NVIDIA
https://github.com/openai/whisper/discussions/1640

Transcribir mas rapido: Probar!!!!!!
https://github.com/Softcatala/whisper-ctranslate2?tab=readme-ov-file
whisper-ctranslate2 2024-03-19T10_06_21.mp4 --language Spanish --output_format txt --compute_type int8 --threads 4

whisper-ctranslate2 *.mp4 --language Spanish --output_format txt --vad_filter True --model large-v3 --computer_type float32


Model: Video
------------------------------------------------------------------------------

rails g model Video location:string posted_at:datetime
rails generate active_admin:resource Video

rails g migration AddStationToVideo station:references
rails g migration AddPathToVideo path:string
rails g migration AddThumToVideo thumbnail:string
rails g migration AddPublicToVideo public_path:string
rails g migration AddTranscriptionToVideo transcription:text


Model: Station
------------------------------------------------------------------------------

rails g model Station name:string directory:string
rails generate active_admin:resource Station


#== New features
rails g migration AddRelationsToTagsTopics tag_id:integer:index topic_id:integer:index
rails g migration AddVariationsToTags variations:string
rails generate active_admin:resource Tag
rails g model TagsTopic tag:references topic:references

#==  Login / Users / Topics
rails generate devise User
rails generate active_admin:resource User
rails generate devise:views users
rails generate model UserTopic user:references topic:references

rails generate controller Topics show
rails g controller Tags show
rails g controller Videos show
rails g controller Stations show

rails g model TopicStatDaily video_quantity:integer topic_date:date topic:references